<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flappy Bird + Cats</title>
<style>
    body {
        margin: 0;
        background: #111;
        color: white;
        font-family: Arial, sans-serif;
        overflow: hidden;
    }
    #loadingBarContainer {
        width: 100%;
        height: 30px;
        background: #333;
        position: absolute;
        top: 0;
    }
    #loadingBar {
        height: 100%;
        width: 0;
        background: limegreen;
    }
    #loadingText {
        position: absolute;
        top: 35px;
        left: 50%;
        transform: translateX(-50%);
    }
    #flappyCanvas {
        position: absolute;
        top: 70px;
        left: 0;
        background: skyblue;
        border: 2px solid white;
    }
    #randomBtn {
        position: absolute;
        top: 100px;
        right: 20px;
        padding: 10px;
        background: orange;
        color: black;
        border: none;
        cursor: pointer;
        font-size: 16px;
    }
    #catImage {
        position: absolute;
        bottom: 20px;
        right: 20px;
        max-width: 200px;
        max-height: 200px;
        border: 2px solid white;
    }
    #skipBtn {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 10px;
        background: red;
        color: white;
        border: none;
        cursor: pointer;
    }
</style>
</head>
<body>

<div id="loadingBarContainer">
    <div id="loadingBar"></div>
</div>
<div id="loadingText">Loading...</div>

<canvas id="flappyCanvas" width="300" height="400"></canvas>

<button id="randomBtn">Random: 0</button>
<img id="catImage" src="" style="display:none">

<button id="skipBtn">Skip</button>

<script>
let loadingMessages = ["Loading assets...", "Preparing game...", "Feeding cats...", "Almost ready...", "Let's go!"];
let loadingIndex = 0;
let loadingBar = document.getElementById("loadingBar");
let loadingText = document.getElementById("loadingText");

function loopLoading() {
    loadingText.textContent = loadingMessages[loadingIndex];
    let width = 0;
    let fillInterval = setInterval(() => {
        width += 2;
        loadingBar.style.width = width + "%";
        if (width >= 100) {
            clearInterval(fillInterval);
            setTimeout(() => {
                loadingIndex = (loadingIndex + 1) % loadingMessages.length;
                width = 0;
                loadingBar.style.width = "0%";
                loopLoading();
            }, 300);
        }
    }, 50);
}
loopLoading();

// Flappy Bird
let canvas = document.getElementById("flappyCanvas");
let ctx = canvas.getContext("2d");

let bird = { x: 50, y: 150, width: 20, height: 20, gravity: 0.5, lift: -7, velocity: 0 };
let pipes = [];
let pipeGap = 100;
let frame = 0;
let playing = false;

function drawBird() {
    ctx.fillStyle = "yellow";
    ctx.fillRect(bird.x, bird.y, bird.width, bird.height);
}

function drawPipes() {
    ctx.fillStyle = "green";
    for (let p of pipes) {
        ctx.fillRect(p.x, 0, p.width, p.top);
        ctx.fillRect(p.x, p.top + pipeGap, p.width, canvas.height - p.top - pipeGap);
    }
}

function updatePipes() {
    for (let p of pipes) {
        p.x -= 2;
    }
    if (frame % 100 === 0) {
        let top = Math.random() * (canvas.height - pipeGap - 50) + 20;
        pipes.push({ x: canvas.width, width: 30, top: top });
    }
    pipes = pipes.filter(p => p.x + p.width > 0);
}

function flappyGameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    if (playing) {
        bird.velocity += bird.gravity;
        bird.y += bird.velocity;
        updatePipes();
        drawPipes();
        drawBird();

        // Collision detection
        for (let p of pipes) {
            if (bird.x < p.x + p.width && bird.x + bird.width > p.x &&
                (bird.y < p.top || bird.y + bird.height > p.top + pipeGap)) {
                playing = false; // Stop game without popup
            }
        }
        if (bird.y + bird.height > canvas.height || bird.y < 0) {
            playing = false;
        }
        frame++;
    } else {
        drawPipes();
        drawBird();
    }
    requestAnimationFrame(flappyGameLoop);
}
flappyGameLoop();

document.addEventListener("keydown", e => {
    if (e.code === "Space" && playing) {
        bird.velocity = bird.lift;
    }
});

canvas.addEventListener("click", () => {
    playing = true;
    bird.y = 150;
    bird.velocity = 0;
    pipes = [];
    frame = 0;
});

// Random Button & Cat Images
let randomBtn = document.getElementById("randomBtn");
let count = 0;
let catImage = document.getElementById("catImage");
let catUrls = [
    "https://i.redd.it/ty3qlu4swjle1.jpeg",
    "https://i.pinimg.com/736x/81/a0/7a/81a07af68d30501df55498d8a457647c.jpg",
    "https://preview.redd.it/heres-the-big-ball-bird-v0-ox1jygnp7gwd1.jpeg?auto=webp&s=ac0c272cdf7844a5889d27df4fc52d9cf1660cda",
    "https://preview.redd.it/you-know-what-else-is-massive-v0-l64fxfyv6p8e1.png?width=377&format=png&auto=webp&s=60b2817440abcf8ab4d791d81a961eef36a83d5c",
    "https://i.pinimg.com/474x/a6/b9/3c/a6b93cdce47fdbad2bb06ac122644658.jpg",
    "https://i.redd.it/hwykbrd4ei6c1.jpeg",
    "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTUP8ZOJ6ml8seno6kI4yisQm8_rSdSCj-B2w&s",
    "https://i.pinimg.com/474x/d5/8c/bc/d58cbce1674579fa2f1087f1a1f9b566.jpg",
    "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQT7qw4isV420vjWn2GKD7uXghQPR9GJ5gAgA&s",
    "https://i.pinimg.com/736x/15/cd/67/15cd679d55c3c1044f9b9c2a3a2798d9.jpg"
];

randomBtn.addEventListener("click", () => {
    if (!playing) {
        count++;
        randomBtn.textContent = `Random: ${count}`;
        let randomCat = catUrls[Math.floor(Math.random() * catUrls.length)];
        catImage.src = randomCat;
        catImage.style.display = "block";
    }
});

// Skip Button (runs away)
let skipBtn = document.getElementById("skipBtn");
skipBtn.addEventListener("mouseover", () => {
    let x = Math.random() * (window.innerWidth - skipBtn.offsetWidth);
    let y = window.innerHeight - skipBtn.offsetHeight - 20;
    skipBtn.style.left = `${x}px`;
    skipBtn.style.top = `${y}px`;
});
</script>

</body>
</html>
 